# üß© Travel Media AI Studio ‚Äì Architecture / Á≥ªÁµ±Êû∂Êßã

## English Version

```text
                         HTTP (upload / generate / retrieve / healthz)
    +-----------+                  +-----------------------------------------+
    |   User    | ---------------> |    FastAPI (app/api/main.py)            |
    +-----------+                  +-----------------+-----------------------+
                                           |           |            |
                                           |           |            +--------------------+
                                           |           |                                     /healthz
                                           |           v
                                           |   +-------+----------+
                                           |   |  RAG Router      |   /retrieve_info
                                           |   |  (app/rag/*)     |
                                           |   +---+--------------+
                                           |       | retrieve / cite
                                           |       v
                                           |   +---+---------------+
                                           |   | Vector DB         |  (FAISS/Chroma/Weaviate)
                                           |   | (vector_db/)      |
                                           |   +---+---------------+
                                           |       ^
                                           |       | builds from
                                           |       | data/docs/
                                           |
   /upload_video                           |
        |                                  |
        v                                  |
+-------+---------+                        |
| Save Video to   |                        |
| data/videos/    | <----------------------+
+-----------------+

   /generate_caption
        |
        v
+-------+------------------------------+
|  Engine (app/engine/*)              |
|  - video_analyzer.py                |
|      OpenCV diff / 4s window        |
|      -> score -> segments           |
|  - captioner.py                     |
|      provider switch:               |
|        openai | local(HF int8/int4) |
|  - planner.py [FUTURE]              |
|      DP-based segment selection     |
+-------+------------------+----------+
        |                  |
        | selects backend  | loads models / tokens (.env, NOT tracked)
        v                  v
+-------+------+     +-----+--------------------------+
| OpenAI API   |     | Local Inference               |
| (remote)     |     | (Transformers / vLLM /       |
+-------+------+     |  Unsloth / TensorRT-LLM [FUTURE]) 
        ^            +-----+--------------------------+
        |                   |                |
        |                   | quant/ft       | caching
        |                   v                v
        |             +-----+--------+   +---+-------------------+
        |             | Quantization |   | KV Cache / Emb Cache |
        |             | (LoRA/QLoRA, |   | (in-mem / disk)      |
        |             | bitsandbytes,|   +---+-------------------+
        |             | GPTQ/AWQ)    |       |
        |             +-----+--------+       |
        |                   |                |
        |                   v                |
        |             +-----+----------------+-------------------------------+
        |             | Fine-tune pipeline (train_lora.ipynb / scripts/)    |
        |             | - PEFT / LoRA adapters                               |
        |             | - Domain data (captions/hashtags)                    |
        |             | - Metrics: BLEU / ROUGE / human eval                 |
        |             +------------------------------------------------------+

                          returns JSON (segments, captions, citations)
                                         |
                                         v
                                   +-----+------ +
                                   |  Response  |
                                   +------------+

‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Infra / DevOps / Observability
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
+---------------------+     +---------------------+     +------------------------------+
| Dockerfile          |     | docker-compose.yml  |     | GitHub Actions (CI/CD)       |
| - runtime image     |     | - FastAPI + backend |     | - pytest / lint              |
| - GPU base [FUTURE] |     | - volumes: data/*   |     | - build & push image         |
+----------+----------+     +----------+----------+     +--------------+---------------+
           |                            |                                   |
           v                            v                                   v
   +-------+----------+        +--------+---------+                 +-------+--------+
   | Config / Secrets |        | Logging / Traces |                 | Benchmarking  |
   | (.env, ignored)  |        | (uvicorn,        |                 | (Serving perf)|
   | Git-ignored OK   |        |  OpenTelemetry   |                 | - HF vs vLLM  |
   +------------------+        |  [FUTURE])       |                 | - latency/QPS |
                               +------------------+                 +----------------

NLP Aux (used by RAG & Planning) [Extensible]
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
+---------------------+   +---------------------+   +-------------------------------+
| NER (spaCy/HF)      |   | Intent Classifier   |   | Sentiment (reviews/comments) |
| - place/date/org    |   | - visa / transport  |   | - guides caption tone         |
| - improves retrieval|   |   / attraction      |   |                               |
+----------+----------+   +----------+----------+   +---------------+---------------+
           \__________________________  guide query routing ________________________/


Future / Research Hooks (for JD coverage)
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
- Planner (DP): knapsack-style selection under time constraint ‚Üí maximize ‚Äúhighlight score‚Äù
- Graph/Topology Retrieval: HNSW / Knowledge Graph fusion / TDA-based outlier detection
- Multilingual: zh/en auto-detect; tokenizer alignment; MT fallback [FUTURE]
- Streaming: server-sent events for token streaming [FUTURE]
- A/B Testing: prompt variants, CTR/retention comparison [FUTURE]
- Security: rate limit, auth (JWT/OAuth2), PII redaction in logs [FUTURE]
```

---

## ‰∏≠ÊñáÁâàÊú¨

```text
                         HTTP (upload / generate / retrieve / healthz)
    +-----------+                  +-----------------------------------------+
    |   ‰ΩøÁî®ËÄÖ  | ---------------> |    FastAPI (app/api/main.py)             |
    +-----------+                  +-----------------+-----------------------+
                                           |           |            |
                                           |           |            +--------------------+
                                           |           |                                     /ÂÅ•Â∫∑Ê™¢Êü•
                                           |           v
                                           |   +-------+----------+
                                           |   |  RAG Ë∑ØÁî±Âô®      |   /Ê™¢Á¥¢Êü•Ë©¢
                                           |   |  (app/rag/*)     |
                                           |   +---+--------------+
                                           |       | Ê™¢Á¥¢ / ÂºïÁî®
                                           |       v
                                           |   +---+---------------+
                                           |   | ÂêëÈáèË≥áÊñôÂ∫´        |  (FAISS/Chroma/Weaviate)
                                           |   | (vector_db/)      |
                                           |   +---+---------------+
                                           |       ^
                                           |       | Âª∫Á´ã‰æÜÊ∫ê
                                           |       | data/docs/
                                           |
   /upload_video                           |
        |                                  |
        v                                  |
+-------+---------+                        |
| ÂÑ≤Â≠òÂΩ±ÁâáÂà∞      |                        |
| data/videos/    | <----------------------+
+-----------------+

   /generate_caption
        |
        v
+-------+------------------------------+
|  ÂºïÊìé (app/engine/*)                |
|  - video_analyzer.py                |
|      OpenCV Áï´Èù¢Â∑ÆÂàÜ / 4 ÁßíÁ™óÂè£     |
|      ‚Üí Ë®àÂàÜ ‚Üí ÂàÜÊÆµ                  |
|  - captioner.py                     |
|      Êèê‰æõËÄÖÂàáÊèõÔºö                   |
|        openai | Êú¨Âú∞(HF int8/int4)  |
|  - planner.py [Êú™‰æÜ]                 |
|      ÂãïÊÖãË¶èÂäÉ(DP)ÊúÄ‰Ω≥ÁâáÊÆµÈÅ∏Êìá        |
+-------+------------------+----------+
        |                  |
        | ÈÅ∏ÊìáÂæåÁ´Ø         | ËºâÂÖ•Ê®°Âûã / ÈáëÈë∞ (.envÔºå‰∏çËøΩËπ§)
        v                  v
+-------+------+     +-----+--------------------------+
| OpenAI API   |     | Êú¨Âú∞Êé®ÁêÜ                       |
| (Èõ≤Á´ØÈÅ†Á´Ø)   |     | (Transformers / vLLM /        |
+-------+------+     |  Unsloth / TensorRT-LLM [Êú™‰æÜ]) 
        ^            +-----+--------------------------+
        |                   |                |
        |                   | ÈáèÂåñ/ÂæÆË™ø      | Âø´Âèñ
        |                   v                v
        |             +-----+--------+   +---+-------------------+
        |             | ÈáèÂåñ/ÂæÆË™ø     |   | KV Cache / ÂêëÈáèÂø´Âèñ |
        |             | (LoRA/QLoRA, |   | (Ë®òÊÜ∂È´î / Á£ÅÁ¢ü)      |
        |             | bitsandbytes,|   +---+-------------------+
        |             | GPTQ/AWQ)    |       |
        |             +-----+--------+       |
        |                   |                |
        |                   v                |
        |             +-----+----------------+-------------------------------+
        |             | ÂæÆË™øÊµÅÁ®ã (train_lora.ipynb / scripts/)               |
        |             | - PEFT / LoRA adapters                               |
        |             | - ÁâπÂÆöË≥áÊñôÈõÜ (Â≠óÂπï/Hashtag)                          |
        |             | - Ë©ï‰º∞ÊåáÊ®ô: BLEU / ROUGE / ‰∫∫Â∑•Ë©ïÂàÜ                  |
        |             +------------------------------------------------------+

                          ÂõûÂÇ≥ JSON (segments, captions, citations)
                                         |
                                         v
                                   +-----+------ +
                                   |  ÂõûÊáâ       |
                                   +------------+

‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Âü∫Á§éÂª∫Ë®≠ / DevOps / Áõ£Êéß
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
+---------------------+     +---------------------+     +------------------------------+
| Dockerfile          |     | docker-compose.yml  |     | GitHub Actions (CI/CD)       |
| - ÈÅãË°åÊôÇÊò†ÂÉè        |     | - FastAPI + ÂæåÁ´Ø    |     | - pytest / lint              |
| - GPU Âü∫Â∫ï [Êú™‰æÜ]   |     | - ÊéõËºâË≥áÊñôÂ§æ data/* |     | - Ëá™ÂãïÂª∫ÁΩÆËàáÁôº‰Ωà             |
+----------+----------+     +----------+----------+     +--------------+---------------+
           |                            |                                   |
           v                            v                                   v
   +-------+----------+        +--------+---------+                 +-------+--------+
   | Ë®≠ÂÆö / Secrets   |        | Êó•Ë™å / ËøΩËπ§      |                 | Âü∫Ê∫ñÊ∏¨Ë©¶       |
   | (.env, Â∑≤ÂøΩÁï•)   |        | (uvicorn,       |                 | - HF vs vLLM   |
   | Git Â∑≤ÊéíÈô§       |        |  OpenTelemetry) |                 | - Âª∂ÈÅ≤ / QPS   |
   +------------------+        |  [Êú™‰æÜ]         |                 +----------------
                               +------------------+                 

NLP ËºîÂä©Ê®°ÁµÑ (Áµ¶ RAG ËàáË¶èÂäÉÂô®‰ΩøÁî®ÔºåÂèØÊì¥Â±ï)
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
+---------------------+   +---------------------+   +-------------------------------+
| NER ÂëΩÂêçÂØ¶È´îË≠òÂà•    |   | ÊÑèÂúñÂàÜÈ°ûÂô®          |   | ÊÉÖÊÑüÂàÜÊûê (Ë©ïË´ñ/ÁïôË®Ä)           |
| - Âú∞Èªû/Êó•Êúü/ÁµÑÁπî    |   | - Á∞ΩË≠â / ‰∫§ÈÄö / ÊôØÈªû|   | - ÊåáÂ∞éÂ≠óÂπïË™ûÊ∞£                 |
| - ÊîπÂñÑÊ™¢Á¥¢ÊïàÊûú      |   |                     |   |                               |
+----------+----------+   +----------+----------+   +---------------+---------------+
           \__________________________  Âπ´Âä©Êü•Ë©¢Ë∑ØÁî± ________________________/


Êú™‰æÜ / Á†îÁ©∂Âª∂‰º∏ (Â∞çÊáâ JD ÊäÄËÉΩ)
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
- Ë¶èÂäÉÂô® (DP): Âú®ÊôÇÈñìÈôêÂà∂ÂÖßÊúÄÂ§ßÂåñÁ≤æÂΩ©ÂàÜÊï∏
- Âúñ/ÊãìÊ®∏Ê™¢Á¥¢: HNSW / Áü•Ë≠òÂúñË≠úËûçÂêà / TDA Áï∞Â∏∏Ê™¢Ê∏¨
- Â§öË™ûÊîØÊè¥: Ëá™ÂãïÂÅµÊ∏¨ zh/enÔºåTokenizer Â∞çÈΩäÔºåMT ÂæåÂÇô [Êú™‰æÜ]
- ÊµÅÂºèËº∏Âá∫: SSE token streaming [Êú™‰æÜ]
- A/B Ê∏¨Ë©¶: Prompt ËÆäÈ´îÔºåCTR/Retention ÊØîËºÉ [Êú™‰æÜ]
- ÂÆâÂÖ®: Rate limit, JWT/OAuth2, Êó•Ë™å PII ÈÅÆÁΩ© [Êú™‰æÜ]
```

---

## Overview
üß© Travel Media AI Studio ‚Äì Project Structure Overview
1. .github/workflows/ci.yml

CI/CD Ëá™ÂãïÂåñËÖ≥Êú¨ÔºöÂÆöÁæ© GitHub Actions workflow„ÄÇ

ÂäüËÉΩÔºöÊØèÊ¨° push ÊôÇÔºåËá™ÂãïÂü∑Ë°åÊ∏¨Ë©¶ (pytest)„ÄÅlintÔºå‰∏¶ÂèØÈÄ≤‰∏ÄÊ≠•Êì¥Â±ïËá™Âãï build Docker image„ÄÇ

2. app/ (‰∏ªË¶ÅÂæåÁ´ØÊáâÁî®)
api/

main.py

FastAPI ÂÖ•Âè£ÔºåÂÆöÁæ©ÊâÄÊúâ API endpointÔºö

/upload_video ‚Üí ‰∏äÂÇ≥ÂΩ±ÁâáÔºåÂ≠òÂà∞ data/videos/„ÄÇ

/generate_caption ‚Üí ÂëºÂè´ Engine ÂàáÁâá + Áî¢ÁîüÂ≠óÂπï„ÄÇ

/retrieve_info ‚Üí ÂëºÂè´ RAG Êü•Ë©¢Ë≥áË®äÔºàÂÉèÁ∞ΩË≠âÊñá‰ª∂Ôºâ„ÄÇ

/healthz ‚Üí ÂÅ•Â∫∑Ê™¢Êü•„ÄÇ

engine/

video_analyzer.py

ÂΩ±ÁâáÂàÜÊûêÂô®ÔºöÁî® OpenCV ÂÅöÁï´Èù¢Â∑ÆÂàÜÔºåÊØè 4 ÁßíÂà§Êñ∑‰∏ÄÂÄã segment ‚Üí Áµ¶Âá∫ÂàÜÊï∏„ÄÇ

captioner.py

Â≠óÂπïÁî¢ÁîüÂô®ÔºöÊ†πÊìöË®≠ÂÆöÔºåÂàáÊèõ providerÔºö

OpenAI APIÔºàÈõ≤Á´ØÔºâ

Local HF / vLLM / Unsloth ÔºàÊú¨Âú∞Ê®°ÂûãÔºâ

planner_dp.py

[Êú™‰æÜÂäüËÉΩ] Highlight Ë¶èÂäÉÂô®ÔºöÁî®ÂãïÊÖãË¶èÂäÉ (DP) Ëß£Ê±∫„ÄåÂ¶Ç‰ΩïÊåëÈÅ∏‰∏ÄÁµÑÁâáÊÆµÔºåÂú®ÈôêÂÆöÈï∑Â∫¶‰∏ãÊúÄÂ§ßÂåñÁ≤æÂΩ©Â∫¶„Äç„ÄÇ

__init__.py

Ê®ôÁ§∫ÁÇ∫ Python package„ÄÇ

rag/

index_docs.py

Êñá‰ª∂Á¥¢ÂºïÂô®ÔºöÊää data/docs/ ÂÖßÁöÑÊñáÂ≠óËΩâÊàêÂêëÈáèÔºåÂ≠òÈÄ≤ vector_db/ (‰æãÂ¶Ç FAISS)„ÄÇ

retrieve.py

Ê™¢Á¥¢Âô®ÔºöÊ†πÊìö Query ÊêúÁ¥¢ÂêëÈáèË≥áÊñôÂ∫´ ‚Üí ÂõûÂÇ≥Áõ∏ÈóúÊñá‰ª∂ÁâáÊÆµ + citation„ÄÇ

__init__.py

Ê®ôÁ§∫ÁÇ∫ Python package„ÄÇ

scripts/

bench_infer.py

ÊïàËÉΩÊ∏¨Ë©¶ËÖ≥Êú¨ÔºöÊØîËºÉ HuggingFace Transformers vs vLLM (Êàñ Unsloth)ÔºåÈáèÊ∏¨Êé®ÁêÜÂª∂ÈÅ≤/ÂêûÂêêÈáè„ÄÇ

__init__.py

Ê®ôÁ§∫ÁÇ∫ Python package„ÄÇ

3. data/

docs/

ÊîæÁü•Ë≠òÊñá‰ª∂Ôºåe.g. sri_lanka_visa.txtÔºàÁî®Êñº RAG Ê™¢Á¥¢Ôºâ„ÄÇ

train/

ÊîæË®ìÁ∑¥Ë≥áÊñôÔºå‰æãÂ¶Ç captions.jsonlÔºàÂ≠óÂπïÂæÆË™øÁî®Ôºâ„ÄÇ

videos/

‰ΩøÁî®ËÄÖ‰∏äÂÇ≥ÁöÑÂΩ±ÁâáÂ≠òÊîæËôï„ÄÇ

4. docs/

structure.md

ÂÆåÊï¥Êû∂ÊßãÊñá‰ª∂Ôºà‰∏≠Ëã±ÊñáÁâàÊû∂ÊßãÂúñ + Ë™™ÊòéÔºâÔºåÁî®‰æÜ demo„ÄÇ

5. models/

È†êÁïôÁµ¶ÂæÆË™øÂæåÊàñ‰∏ãËºâÁöÑÊ®°ÂûãÊ™îÊ°à (LoRA weights, HF checkpoints)„ÄÇ

6. tests/

test_api.py

ÂñÆÂÖÉÊ∏¨Ë©¶ÔºöÊ∏¨Ë©¶ API ÊòØÂê¶Ê≠£Â∏∏Â∑•‰Ωú„ÄÇ

7. vector_db/

rag_hnsw.faiss

ÂêëÈáèË≥áÊñôÂ∫´Ê™îÊ°à (FAISS HNSW Á¥¢Âºï)„ÄÇ

rag_paths.json

metadataÔºåÁ¥ÄÈåÑÁ¥¢ÂºïÂ∞çÊáâÁöÑÊ™îÊ°à/Ë∑ØÂæë„ÄÇ

8. Root files

.env.example

ÁØÑ‰æãÁí∞Â¢ÉËÆäÊï∏ÔºàAPI key Á≠âÔºâÔºåÁúüÊ≠£ÁöÑ .env Ë¢´ gitignore„ÄÇ

.gitignore

ÂøΩÁï•Ê™îÊ°àË¶èÂâáÔºà.env, model weights, video files‚Ä¶Ôºâ„ÄÇ

docker-compose.yaml

ÂÆöÁæ©‰∏ÄÈçµÂïüÂãïÂ§öÊúçÂãôÔºàFastAPI + ÂêëÈáèË≥áÊñôÂ∫´Ôºâ„ÄÇ

Dockerfile

ÂÆöÁæ©ÂæåÁ´ØÊúçÂãôÁí∞Â¢ÉÔºàPython„ÄÅ‰æùË≥¥„ÄÅÈÅãË°åÊåá‰ª§Ôºâ„ÄÇ

requirements.txt

Python Â•ó‰ª∂ÈúÄÊ±Ç„ÄÇ

README.md

Á∞°‰ªã„ÄÅÂÆâË£ùÊïôÂ≠∏„ÄÅÂø´ÈÄüÂïüÂãï„ÄÇ

üîó ‰∏≤Ëµ∑‰æÜÁöÑÊïÖ‰∫ãÔºàPipelineÔºâ

‰ΩøÁî®ËÄÖ‰∏äÂÇ≥ÂΩ±Áâá
‚Üí /upload_video ‚Üí ÂÑ≤Â≠òÂà∞ data/videos/„ÄÇ

Áî¢ÁîüÂ≠óÂπï / highlight
‚Üí /generate_caption ‚Üí engine/video_analyzer.py ÂàáÁâá ‚Üí engine/captioner.py Áî¢ÁîüÂ≠óÂπï„ÄÇ
‚Üí [Êú™‰æÜ] engine/planner_dp.py Áî® DP ÈÅ∏ÊúÄÁ≤æÂΩ© 34 Áßí ‚Üí ÂõûÂÇ≥Â≠óÂπï + highlight„ÄÇ

Áü•Ë≠òÊ™¢Á¥¢ (RAG)
‚Üí /retrieve_info ‚Üí rag/retrieve.py ‚Üí ÊêúÁ¥¢ vector_db/ (Áî± rag/index_docs.py Âª∫Á´ã)„ÄÇ
‚Üí ÂõûÂÇ≥Á≠îÊ°à + citationÔºà‰æãÂ¶ÇÁ∞ΩË≠âË≥áË®äÔºâ„ÄÇ

ÊïàËÉΩËàáÂæÆË™ø

scripts/bench_infer.pyÔºöÊØîËºÉ HuggingFace vs vLLM ÁöÑÂª∂ÈÅ≤„ÄÇ

data/train/captions.jsonlÔºöÂèØÂÅö LoRA ÂæÆË™ø ‚Üí Â≠òÂú® models/„ÄÇ

Infra/DevOps

Áî® Docker ÊâìÂåÖÔºådocker-compose up ‰∏ÄÈçµÂïüÂãï API + DB„ÄÇ

GitHub Actions (ci.yml) Ëá™ÂãïÊ∏¨Ë©¶ & build„ÄÇ

tests/test_api.py Á¢∫‰øù API Ê≠£Â∏∏„ÄÇ

docs/structure.mdÔºöÂÆåÊï¥ÊäÄË°ìË™™Êòé„ÄÇ
```text
